<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Material Test Certificate • {{ item.reference if item else 'N/A' }}</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <style>
      @media print { .no-print { display: none; } }
      .cert { background:#fff; padding:1rem; border:1px solid #eee; border-radius:8px; }
      .grid { display:grid; grid-template-columns: 1fr 1fr; gap:0.75rem; }
      .row { display:flex; gap:0.5rem; }
      .label { width:160px; color:#666; }
      .value { font-weight: 600; }
      .section-title { margin:1rem 0 0.5rem; font-size:1.1rem; }
      .muted { color:#666; }
      pre.results { white-space: pre-wrap; font-size: 0.95em; padding:0.75rem; background:#fafafa; border:1px solid #eee; border-radius:6px; }
    </style>
  </head>
  <body>
    <header class="topbar no-print" style="justify-content: space-between;">
      <div class="brand" style="display:flex; align-items:center; gap:0.5rem;">
        <img src="/static/logo.svg" alt="Logo" style="height:24px;" />
        <span>{{ (company.name or 'Matrix ERP') if company else 'Matrix ERP' }}</span>
      </div>
      <div>
        <a class="btn" href="/quality/reports">Back</a>
        <button class="btn btn-primary" onclick="window.print()">Print</button>
      </div>
    </header>

    <main class="content">
      <div class="cert">
        <h1 style="margin-top:0">Material Test Certificate (MTC)</h1>
        <p class="muted">This certificate summarizes material test results for traceability and compliance.</p>

        <div class="grid">
          <div class="row"><div class="label">Reference</div><div class="value">{{ item.reference if item else '—' }}</div></div>
          <div class="row"><div class="label">Date</div><div class="value">{{ (item.date or '')[:10] if item else '—' }}</div></div>
          <div class="row"><div class="label">Report Type</div><div class="value">{{ item.type if item else '—' }}</div></div>
          <div class="row"><div class="label">Certificate No.</div><div class="value">{{ item.id if item else '—' }}</div></div>
        </div>

        <div class="section-title">Summary</div>
        <div>{{ item.summary if item else '' }}</div>

        <div class="section-title">Results</div>
        {% if results_obj %}
        <table class="table" style="width:100%;">
          <thead>
            <tr>
              <th>Parameter</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            {% for k, v in results_obj.items() %}
            <tr>
              <td>{{ k }}</td>
              <td>{{ v }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <pre class="results">{{ item.results if item else '' }}</pre>
        {% endif %}

        <div class="section-title">Declaration</div>
        <p>The above results have been verified and recorded according to internal QA procedures. This certificate is issued to attest the material's conformity to stated tests.</p>

        <div class="grid" style="margin-top:1rem;">
          <div>
            <div class="muted">Authorized by</div>
            <div class="value">{{ (company.qa_manager or 'Quality Assurance') if company else 'Quality Assurance' }}</div>
          </div>
          <div>
            <div class="muted">Signature</div>
            <div class="value">__________________________</div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>