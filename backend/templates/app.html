<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}{{ app_item.name }} • Matrix ERP{% endblock %}</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  </head>
  <body>
    <header class="topbar">
        <div class="brand">
          <img src="/static/logo.svg" alt="Matrix ERP" class="brand-logo" />
        </div>
      <nav class="breadcrumbs"><a href="/">Apps</a> / {{ app_item.name }}</nav>
  </header>
    <div class="layout">
      <aside class="main-nav">
        <div class="section-title">Menu</div>
        <nav class="nav">
          <!-- 1. Dashboard -->
          <details {% if request.url.path == '/' or request.url.path.startswith('/chart') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-home"></i></span><span class="label">Dashboard</span></summary>
            <div class="subnav">
              <a href="/chart" class="{% if request.url.path.startswith('/chart') %}active{% endif %}">Overview Metrics</a>
              <a href="#">Branch Summary</a>
              <a href="#">Notifications</a>
            </div>
          </details>

          <!-- 2. Human Resources -->
          <details {% if request.url.path.startswith('/employees') or request.url.path.startswith('/time') or request.url.path.startswith('/hr') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-users"></i></span><span class="label">Human Resources</span></summary>
            <div class="subnav">
              <a href="/employees" title="Personal data, ID docs, contracts" class="{% if request.url.path.startswith('/employees') %}active{% endif %}">Employee Directory</a>
              <a href="/hr/payroll" title="Salary processing, bonuses, deductions" class="{% if request.url.path.startswith('/hr/payroll') %}active{% endif %}">Payroll</a>
              <a href="/time/attendance" title="Clock-in/out, shift planning" class="{% if request.url.path.startswith('/time/attendance') or request.url.path.startswith('/time/shifts') %}active{% endif %}">Attendance &amp; Shifts</a>
              <a href="/time/leave" title="Request, approve, track leaves" class="{% if request.url.path.startswith('/time/leave') %}active{% endif %}">Leave Management</a>
              <a href="/hr/recruitment" title="Job postings, applications, onboarding" class="{% if request.url.path.startswith('/hr/recruitment') %}active{% endif %}">Recruitment</a>
            </div>
          </details>

          <!-- 3. Finance & Accounting -->
          <details {% if request.url.path.startswith('/accounting') or request.url.path.startswith('/purchases') or request.url.path.startswith('/banking') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-money-bill"></i></span><span class="label">Finance &amp; Accounting</span></summary>
            <div class="subnav">
              <a href="/accounting/coa" class="{% if request.url.path.startswith('/accounting/coa') %}active{% endif %}">General Ledger</a>
              <a href="/purchases/bills" class="{% if request.url.path.startswith('/purchases/bills') %}active{% endif %}">Accounts Payable</a>
              <a href="/accounting/ar" class="{% if request.url.path.startswith('/accounting/ar') %}active{% endif %}">Accounts Receivable</a>
              <a href="#">Budgeting &amp; Forecasting</a>
              <a href="/banking/reconcile" class="{% if request.url.path.startswith('/banking/reconcile') %}active{% endif %}">Bank Reconciliation</a>
            </div>
          </details>

          <!-- 4. Sales Management -->
          <details {% if request.url.path.startswith('/mail') or request.url.path.startswith('/catalogs/customers') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-chart-line"></i></span><span class="label">Sales Management</span></summary>
            <div class="subnav">
              <a href="/mail/leads" class="{% if request.url.path.startswith('/mail/leads') %}active{% endif %}">Leads &amp; Opportunities</a>
              <a href="/mail/quotes" class="{% if request.url.path.startswith('/mail/quotes') %}active{% endif %}">Quotations</a>
              <a href="/mail/orders" class="{% if request.url.path.startswith('/mail/orders') %}active{% endif %}">Sales Orders</a>
              <a href="/catalogs/customers" class="{% if request.url.path.startswith('/catalogs/customers') %}active{% endif %}">Customer Database</a>
            </div>
          </details>

          <!-- 5. Inventory Management -->
          <details {% if request.url.path.startswith('/inventory') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-warehouse"></i></span><span class="label">Inventory Management</span></summary>
            <div class="subnav">
              <a href="/inventory/moves" class="{% if request.url.path.startswith('/inventory/moves') %}active{% endif %}">Stock Ledger</a>
              <a href="/inventory/transfers" class="{% if request.url.path.startswith('/inventory/transfers') %}active{% endif %}">Warehouse Transfer</a>
              <a href="/inventory/issue" class="{% if request.url.path.startswith('/inventory/issue') %}active{% endif %}">Stock Adjustment</a>
              <a href="/catalogs/products" class="{% if request.url.path.startswith('/catalogs/products') %}active{% endif %}">Item Master</a>
            </div>
          </details>

          <!-- 6. Procurement -->
          <details {% if request.url.path.startswith('/purchases') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-shopping-cart"></i></span><span class="label">Procurement</span></summary>
            <div class="subnav">
              <a href="#">Purchase Requisitions</a>
              <a href="#">Vendor Management</a>
              <a href="/purchases/orders" class="{% if request.url.path.startswith('/purchases/orders') %}active{% endif %}">Purchase Orders</a>
              <a href="/inventory/receive" class="{% if request.url.path.startswith('/inventory/receive') %}active{% endif %}">Goods Receipt</a>
            </div>
          </details>

          <!-- 7. Manufacturing -->
          <details {% if request.url.path.startswith('/production') or request.url.path.startswith('/mrp') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-cogs"></i></span><span class="label">Manufacturing</span></summary>
            <div class="subnav">
              <a href="/production/work_orders" class="{% if request.url.path.startswith('/production/work_orders') %}active{% endif %}">Work Orders</a>
              <a href="/production/boms" class="{% if request.url.path.startswith('/production/boms') %}active{% endif %}">BOM (Bill of Materials)</a>
              <a href="#">Job Scheduling</a>
              <a href="#">WIP Tracking</a>
            </div>
          </details>

          <!-- 8. Production Planning -->
          <details>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-project-diagram"></i></span><span class="label">Production Planning</span></summary>
            <div class="subnav">
              <a href="#">Master Production Schedule</a>
              <a href="#">Capacity Planning</a>
              <a href="#">Resource Allocation</a>
              <a href="#">Forecasting</a>
            </div>
          </details>

          <!-- 9. Quality Assurance -->
          <details>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-check-circle"></i></span><span class="label">Quality Assurance</span></summary>
            <div class="subnav">
              <a href="/quality/inspections" class="{% if request.url.path.startswith('/quality/inspections') %}active{% endif %}">Inspection Plans</a>
              <a href="/quality/inspections" class="{% if request.url.path.startswith('/quality/inspections') %}active{% endif %}">QC Logs</a>
              <a href="/quality/defects" class="{% if request.url.path.startswith('/quality/defects') %}active{% endif %}">Defect Management</a>
              <a href="/quality/compliance" class="{% if request.url.path.startswith('/quality/compliance') %}active{% endif %}">Compliance Reports</a>
            </div>
          </details>

          <!-- 10. Maintenance (MRO) -->
          <details>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-tools"></i></span><span class="label">Maintenance (MRO)</span></summary>
            <div class="subnav">
              <a href="#">Maintenance Calendar</a>
              <a href="#">Equipment Registry</a>
              <a href="#">Preventive Maintenance</a>
              <a href="#">Work Orders</a>
            </div>
          </details>

          <!-- 11. Branch & Logistics -->
          <details>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-building"></i></span><span class="label">Branch &amp; Logistics</span></summary>
            <div class="subnav">
              <a href="#">Inter-Branch Transfers</a>
              <a href="#">Branch Performance</a>
              <a href="#">Branch Approvals</a>
              <a href="#">Notifications</a>
            </div>
          </details>

          <!-- 12. CRM -->
          <details>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-handshake"></i></span><span class="label">CRM</span></summary>
            <div class="subnav">
              <a href="#">Campaigns</a>
              <a href="#">Communication Logs</a>
              <a href="#">Feedback Collection</a>
              <a href="#">Follow-ups</a>
            </div>
          </details>

          <!-- 13. Reports & Analytics -->
          <details {% if request.url.path.startswith('/chart') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-chart-pie"></i></span><span class="label">Reports &amp; Analytics</span></summary>
            <div class="subnav">
              <a href="#">Custom Reports</a>
              <a href="/chart" class="{% if request.url.path.startswith('/chart') %}active{% endif %}">KPIs Dashboard</a>
              <a href="#">Export Center</a>
              <a href="#">Audit Logs</a>
            </div>
          </details>

          <!-- 14. Document Control -->
          <details>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-folder"></i></span><span class="label">Document Control</span></summary>
            <div class="subnav">
              <a href="#">SOPs</a>
              <a href="#">Training Material</a>
              <a href="#">Certifications</a>
              <a href="#">Version History</a>
            </div>
          </details>

          <!-- 15. Settings & Permissions -->
          <details {% if request.url.path.startswith('/settings') or request.url.path.startswith('/app/settings') %}open{% endif %}>
            <summary><span class="caret">▸</span><span class="icon"><i class="fa-solid fa-cog"></i></span><span class="label">Settings &amp; Permissions</span></summary>
            <div class="subnav">
              <a href="/app/settings" class="{% if request.url.path.startswith('/app/settings') %}active{% endif %}">Role Management</a>
              <a href="/app/settings" class="{% if request.url.path.startswith('/app/settings') %}active{% endif %}">Module Visibility</a>
              <a href="#">Theme &amp; Layout</a>
              <a href="#">Notifications Settings</a>
            </div>
          </details>
        </nav>
      </aside>
    <main class="content">
      {% block content %}
      <section class="app-header" style="--tile-color: {{ app_item.color }}">
        <div>
          <h1 class="app-title">{{ app_item.name }}</h1>
          <p class="app-desc">{{ app_item.description }}</p>
        </div>
      </section>

      <section class="coming-soon">
        <h2>Coming soon</h2>
        <p>
          This is a stub page. We will add real features (models, views,
          permissions, workflows) incrementally.
        </p>
        {% block actions %}
        {% if app_item.slug == 'mail' %}
        <div class="actions">
          <a class="btn btn-primary" href="/mail/quotes">Open Quotes</a>
          <a class="btn" href="/mail/quotes/new">New Quote</a>
          <a class="btn" href="/mail/orders">Orders</a>
          <a class="btn" href="/mail/invoices">Invoices</a>
          <a class="btn" href="/catalogs/customers">Customers</a>
          <a class="btn" href="/catalogs/products">Products</a>
          <a class="btn" href="/accounting/ar">AR Ledger</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'accounting' %}
        <div class="actions">
          <a class="btn" href="/accounting/ar">AR Ledger</a>
          <a class="btn" href="/accounting/ar/customers">AR by Customer</a>
          <a class="btn" href="/accounting/ar/invoices">AR by Invoice</a>
          <a class="btn" href="/accounting/ar/aging">Aging</a>
          <a class="btn" href="/accounting/ar/adjustments/new">New Adjustment</a>
          <span class="divider"></span>
          <a class="btn" href="/accounting/coa">Chart of Accounts</a>
          <a class="btn" href="/accounting/journals">Journals</a>
          <a class="btn" href="/accounting/trial-balance">Trial Balance</a>
          <a class="btn" href="/accounting/pl">Profit &amp; Loss</a>
          <a class="btn" href="/accounting/balance-sheet">Balance Sheet</a>
          <span class="divider"></span>
          <a class="btn" href="/accounting/budget">Budgeting</a>
          <a class="btn" href="/accounting/tax">Tax Compliance</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'purchases' %}
        <div class="actions">
          <a class="btn btn-primary" href="/purchases/orders">Purchase Orders</a>
          <a class="btn" href="/purchases/orders/new">New PO</a>
          <a class="btn" href="/purchases/bills">Bills</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'inventory' %}
        <div class="actions">
          <a class="btn btn-primary" href="/inventory/items">Items</a>
          <a class="btn" href="/inventory/moves">Moves</a>
          <a class="btn" href="/inventory/receive">Receive</a>
          <a class="btn" href="/inventory/issue">Issue</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'production' %}
        <div class="actions">
          <a class="btn btn-primary" href="/production/work_orders">Work Orders</a>
          <a class="btn" href="/production/work_orders/new">New Work Order</a>
          <a class="btn" href="/production/boms">BOMs</a>
          <a class="btn" href="/production/boms/new">New BOM</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'mrp' %}
        <div class="actions">
          <a class="btn btn-primary" href="/mrp/plan">Open MRP Plan</a>
          <a class="btn" href="/production/boms">Manage BOMs</a>
          <a class="btn" href="/production/work_orders">Work Orders</a>
          <a class="btn" href="/inventory/items">Inventory</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'slitting' %}
        <div class="actions">
          <a class="btn btn-primary" href="/slitting/new">New Slitting Plan</a>
          <a class="btn" href="/slitting/plans">Saved Plans</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'employees' %}
        <div class="actions">
          <a class="btn btn-primary" href="/employees">Directory</a>
          <a class="btn" href="/employees/new">New Employee</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'time' %}
        <div class="actions">
          <a class="btn btn-primary" href="/time/shifts">Shifts</a>
          <a class="btn" href="/time/attendance">Attendance</a>
          <a class="btn" href="/time/timesheets">Timesheets</a>
          <a class="btn" href="/time/overtime">Overtime</a>
          <a class="btn" href="/time/leave">Leave</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'hr' %}
        <div class="actions">
          <a class="btn btn-primary" href="/hr/payroll/run">Run Payroll</a>
          <a class="btn" href="/hr/recruitment/new">Create Job</a>
          <span class="divider"></span>
          <a class="btn" href="/employees">Employee Directory</a>
          <a class="btn" href="/time/attendance">Attendance</a>
          <a class="btn" href="/time/leave">Leave</a>
        </div>
        {% endif %}
        {% if app_item.slug == 'settings' %}
        <div class="actions">
          <a class="btn btn-primary" href="/settings/company">Company</a>
          <a class="btn" href="/settings/warehouses">Warehouses</a>
          <a class="btn" href="/settings/locations">Locations</a>
          <span class="divider"></span>
          <a class="btn" href="/settings/org-units">Org Units</a>
          <a class="btn" href="/settings/positions">Positions</a>
        </div>
        {% endif %}
        {% endblock %}
      </section>
      {% endblock %}
    </main>
    </div>

    <footer class="footer">Matrix ERP • Module placeholder</footer>
  </body>
  </html>