<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventory Moves (Print)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 24px; }
    h1 { margin: 0 0 8px; }
    .meta { color: #555; margin-bottom: 16px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ddd; padding: 6px 8px; font-size: 13px; }
    th { background: #f6f6f6; text-align: left; }
    .actions { margin: 12px 0 20px; }
    .actions .btn { display: inline-block; padding: 6px 10px; border: 1px solid #888; background: #fff; color: #222; text-decoration: none; margin-right: 8px; }
    @media print {
      .actions { display: none; }
    }
  </style>
</head>
<body>
  <h1>Inventory Moves</h1>
  <div class="meta">
    Filters:
    {% if selected_ref %} Ref={{ selected_ref }}; {% endif %}
    {% if selected_warehouse %} Warehouse={{ selected_warehouse }}; {% endif %}
    {% if selected_location %} Location={{ selected_location }}; {% endif %}
    {% if selected_type %} Type={{ selected_type }}; {% endif %}
    {% if selected_start_date %} Start={{ selected_start_date }}; {% endif %}
    {% if selected_end_date %} End={{ selected_end_date }}; {% endif %}
    {% if selected_memo %} Memo contains "{{ selected_memo }}"; {% endif %}
    Sorted: {{ selected_sort or 'date' }} ({{ selected_order or 'asc' }})
    â€¢ Total moves: {{ total_count }}
  </div>

  <div class="actions">
    <a class="btn" href="javascript:window.print()">Print</a>
    <a class="btn" href="/inventory/moves?format=csv{% if selected_type %}&type={{ selected_type }}{% endif %}{% if selected_warehouse %}&warehouse={{ selected_warehouse }}{% endif %}{% if selected_location %}&location={{ selected_location }}{% endif %}{% if selected_ref %}&ref={{ selected_ref }}{% endif %}{% if selected_start_date %}&start_date={{ selected_start_date }}{% endif %}{% if selected_end_date %}&end_date={{ selected_end_date }}{% endif %}{% if selected_memo %}&memo={{ selected_memo }}{% endif %}">Export CSV</a>
    <a class="btn" href="/inventory/moves?format=json{% if selected_type %}&type={{ selected_type }}{% endif %}{% if selected_warehouse %}&warehouse={{ selected_warehouse }}{% endif %}{% if selected_location %}&location={{ selected_location }}{% endif %}{% if selected_ref %}&ref={{ selected_ref }}{% endif %}{% if selected_start_date %}&start_date={{ selected_start_date }}{% endif %}{% if selected_end_date %}&end_date={{ selected_end_date }}{% endif %}{% if selected_memo %}&memo={{ selected_memo }}{% endif %}">Export JSON</a>
    <a class="btn" href="/inventory/moves">Back to interactive view</a>
  </div>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Product</th>
        <th>Quantity</th>
        <th>Unit Cost</th>
        <th>Ref</th>
        <th>Memo</th>
        <th>Warehouse</th>
        <th>Location</th>
      </tr>
    </thead>
    <tbody>
      {% for m in moves %}
      <tr>
        <td>{{ m.date }}</td>
        <td>{{ m.type }}</td>
        <td>{{ m.product }}</td>
        <td>{{ m.quantity }}</td>
        <td>{{ m.unit_cost }}</td>
        <td>{{ m.ref }}</td>
        <td>{{ m.memo }}</td>
        <td>{{ m.warehouse }}</td>
        <td>{{ m.location }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>