{% extends "app.html" %}
{% block title %}Journals{% endblock %}
{% block content %}
<div class="layout-with-sidebar">
  <aside class="sidebar">
    <nav class="submodule-nav">
      <a href="/accounting/coa">Chart of Accounts</a>
      <a class="active" href="/accounting/journals">Journals</a>
      <a href="/accounting/trial-balance">Trial Balance</a>
      <a href="/accounting/pl">Profit &amp; Loss</a>
      <a href="/accounting/balance-sheet">Balance Sheet</a>
    </nav>
  </aside>
  <section>
    <h2>Journal Entries</h2>
    <p><a class="btn btn-primary" href="/accounting/journals/new">New Journal Entry</a></p>
    {% if entries and entries|length > 0 %}
    <table class="table">
      <thead>
        <tr><th>Date</th><th>Ref</th><th>Memo</th><th>Lines</th></tr>
      </thead>
      <tbody>
        {% for e in entries %}
        <tr>
          <td>{{ e.date }}</td>
          <td>{{ e.ref }}</td>
          <td>{{ e.memo }}</td>
          <td>
            <table class="table" style="margin:0">
              <thead>
                <tr><th>Account</th><th>Debit</th><th>Credit</th><th>Memo</th></tr>
              </thead>
              <tbody>
                {% for l in e.lines %}
                <tr>
                  <td>{{ l.account_code }}</td>
                  <td style="text-align:right;">{{ '%.2f'|format(l.debit or 0) }}</td>
                  <td style="text-align:right;">{{ '%.2f'|format(l.credit or 0) }}</td>
                  <td>{{ l.memo }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No journal entries yet.</p>
    {% endif %}
  </section>
</div>
{% endblock %}