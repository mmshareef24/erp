<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sales • New Quote</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="topbar">
 <div class="brand">Matrix ERP</div>
      <nav class="breadcrumbs"><a href="/">Apps</a> / <a href="/app/sales">Sales</a> / <a href="/sales/quotes">Quotes</a> / New</nav>
    </header>

    <main class="content">
      <div class="layout-with-sidebar">
        <aside class="sidebar">
          <nav class="submodule-nav">
            <a href="/sales/orders">Orders</a>
            <a class="active" href="/sales/quotes">Quotes</a>
            <a href="/sales/invoices">Invoices</a>
          </nav>
        </aside>
        <section>
          <form class="form" action="/sales/quotes" method="post">
            <div class="card">
              <h2>Create Quote</h2>
              <div class="form-grid">
                <label>Customer
                  <select name="customer" required>
                    <option value="">Select customer</option>
                    {% for c in customers %}
                    <option value="{{ c.name }}">{{ c.name }}</option>
                    {% endfor %}
                  </select>
                </label>
                <label>Status
                  <select name="status">
                    <option value="draft">Draft</option>
                    <option value="sent">Sent</option>
                    <option value="confirmed">Confirmed</option>
                  </select>
                </label>
              </div>

              <h3>Items</h3>
              <table class="table" id="items-table">
                <thead>
                  <tr>
                    <th style="width:45%">Product</th>
                    <th style="width:15%">Qty</th>
                    <th style="width:20%">Unit Price</th>
                    <th style="width:20%">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><input type="text" name="product" required /></td>
                    <td><input type="number" name="quantity" step="0.01" min="0" required /></td>
                    <td><input type="number" name="unit_price" step="0.01" min="0" required /></td>
                    <td><button type="button" class="btn" onclick="removeRow(this)">Remove</button></td>
                  </tr>
                </tbody>
              </table>
              <div class="actions">
                <button type="button" class="btn" onclick="addRow()">Add Item</button>
              </div>

              <div class="actions">
                <a class="btn" href="/sales/quotes">Cancel</a>
                <button class="btn btn-primary" type="submit">Create</button>
              </div>
            </div>
          </form>
        </section>
      </div>
    </main>

    <script>
      function addRow() {
        const tbody = document.querySelector('#items-table tbody');
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input type="text" name="product" required /></td>
          <td><input type="number" name="quantity" step="0.01" min="0" required /></td>
          <td><input type="number" name="unit_price" step="0.01" min="0" required /></td>
          <td><button type="button" class="btn" onclick="removeRow(this)">Remove</button></td>
        `;
        tbody.appendChild(tr);
      }
      function removeRow(btn) {
        const tr = btn.closest('tr');
        const tbody = document.querySelector('#items-table tbody');
        if (tbody.rows.length > 1) tbody.removeChild(tr);
      }
    </script>

    <footer class="footer">Sales • New Quote</footer>
  </body>
  </html>