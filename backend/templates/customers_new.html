<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <title>New Customer • Matrix ERP</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="topbar">
 <div class="brand">Matrix ERP</div>
      <nav class="breadcrumbs"><a href="/">Apps</a> / <a href="/catalogs/customers">Customers</a> / New</nav>
    </header>

    <main class="content">
      <div class="card">
        <h2>Create Customer</h2>
        <form method="post" action="/catalogs/customers" class="form-grid">
          <label>
            Name
            <input type="text" name="name" required />
          </label>
          <label>
            Email
            <input type="email" name="email" />
          </label>
          <label>
            Address line 1
            <input type="text" name="address1" />
          </label>
          <label>
            Address line 2
            <input type="text" name="address2" />
          </label>
          <label>
            City
            <input type="text" name="city" />
          </label>
          <label>
            State/Province
            <input type="text" name="state" />
          </label>
          <label>
            Postal code
            <input type="text" name="postal_code" />
          </label>
          <label>
            Country
            <select name="country" id="country-select">
              <option value="">Select country</option>
              {% for c in countries %}
              <option value="{{ c.code }}">{{ c.name }}</option>
              {% endfor %}
            </select>
          </label>
          <label>
            VAT number
            <input type="text" name="vat_number" />
          </label>
          <label>
            VAT rate
            <input type="number" step="0.01" name="vat_rate" id="vat-rate" value="0.00" />
          </label>
          <div class="muted">AR account will be set based on country.</div>
          <div id="ar-preview" class="muted"></div>
          <div class="actions">
            <button class="btn btn-primary" type="submit">Save</button>
            <a class="btn" href="/catalogs/customers">Cancel</a>
          </div>
        </form>
      </div>
    </main>
    <script>
      const vatByCountry = {
        US: 0.00, GB: 0.20, DE: 0.19, FR: 0.20, AE: 0.05,
        SA: 0.15, IN: 0.18, PK: 0.18, CA: 0.05, AU: 0.10
      };
      const sel = document.getElementById('country-select');
      const vatInput = document.getElementById('vat-rate');
      const arPrev = document.getElementById('ar-preview');
      sel?.addEventListener('change', () => {
        const code = sel.value || '';
        const rate = vatByCountry[code] ?? 0.00;
        vatInput.value = rate.toFixed(2);
        if (code) {
          arPrev.textContent = `Receivable account: AR-${code}`;
        } else {
          arPrev.textContent = '';
        }
      });
    </script>

 <footer class="footer">Matrix ERP • Customers</footer>
  </body>
</html>